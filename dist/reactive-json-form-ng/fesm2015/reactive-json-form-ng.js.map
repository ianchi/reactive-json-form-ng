{"version":3,"file":"reactive-json-form-ng.js.map","sources":["ng://reactive-json-form-ng/lib/core/context.ts","ng://reactive-json-form-ng/lib/core/abstractwidget.ts","ng://reactive-json-form-ng/lib/core/expressions.ts","ng://reactive-json-form-ng/lib/core/defaultwidget.component.ts","ng://reactive-json-form-ng/lib/core/widgetregistry.service.ts","ng://reactive-json-form-ng/lib/core/widget.directive.ts","ng://reactive-json-form-ng/lib/core/format.ts","ng://reactive-json-form-ng/lib/core/routedwidget.component.ts","ng://reactive-json-form-ng/lib/core/core.module.ts","ng://reactive-json-form-ng/lib/core/formfieldwidget.ts","ng://reactive-json-form-ng/lib/material/material.module.ts","ng://reactive-json-form-ng/lib/material/formfield/input/input.component.ts","ng://reactive-json-form-ng/lib/material/formfield/checkbox/checkbox.component.ts","ng://reactive-json-form-ng/lib/material/formfield/toggle/toggle.component.ts","ng://reactive-json-form-ng/lib/material/formfield/slider/slider.component.ts","ng://reactive-json-form-ng/lib/material/formfield/button/button.component.ts","ng://reactive-json-form-ng/lib/material/formfield/form/form.component.ts","ng://reactive-json-form-ng/lib/material/formfield/autocomplete/autocomplete.component.ts","ng://reactive-json-form-ng/lib/material/formfield/formfield.module.ts","ng://reactive-json-form-ng/lib/material/common/card/card.component.ts","ng://reactive-json-form-ng/lib/material/common/table/table.component.ts","ng://reactive-json-form-ng/lib/material/common/container/container.component.ts","ng://reactive-json-form-ng/lib/material/common/grid-container/gridcontainer.component.ts","ng://reactive-json-form-ng/lib/material/common/tabs/tabs.component.ts","ng://reactive-json-form-ng/lib/material/common/code/code.component.ts","ng://reactive-json-form-ng/lib/material/common/common.module.ts"],"sourcesContent":["/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nexport interface IContextDef {\n  [identifier: string]: any;\n}\n\n\n/**\n * Helper class to hold context for expression evaluation.\n * It only gives a 'type' to a plain object.\n * It has static methods to manage inheritance and adding properties and builtins\n */\nexport class Context {\n\n  /** Helper definition of built-in objects */\n  static builtinsDef: IContextDef = {\n\n    // Builtin functions:\n    parseFloat: parseFloat,\n    parseInt: parseInt,\n    isNaN: isNaN,\n    isFinite: isFinite,\n\n    // Fundamental objects:\n    Number: Number,\n    Math: Math,\n    Date: Date,\n    Array: Array,\n    JSON: JSON,\n    Object: Object,\n\n  };\n\n  /**\n   * Creates a Context object, inheriting from an optional `parent` and adding custom properties\n   * and optionally builtin objects\n   * @param parent\n   * @param publicProps\n   * @param readonlyProps\n   * @param hiddenProps\n   * @param builtins Boolean. If true adds builtinobjects as public properties,\n   */\n  static create(parent?: Context, publicProps?: IContextDef,\n    readonlyProps?: IContextDef,\n    hiddenProps?: IContextDef,\n    builtins?: boolean): Context {\n\n    const context: Context = parent ? Object.create(parent) : new Context();\n\n    if (builtins) Context.defineReadonly(context, Context.builtinsDef);\n    if (publicProps) Object.assign(context, publicProps);\n    if (readonlyProps) Context.defineReadonly(context, readonlyProps);\n    if (hiddenProps) Context.defineHidden(context, hiddenProps);\n\n    return context;\n  }\n\n  /** Adds readonly properties to a Context */\n  static defineReadonly(context: Context, Props: IContextDef) {\n\n    // tslint:disable-next-line:forin\n    for (const prop in Props) {\n      Object.defineProperty(context, prop, {\n        enumerable: true,\n        writable: false,\n        value: Props[prop]\n      });\n    }\n\n    return context;\n  }\n\n  /** Adds hidden (non enumerable) properties to a Context */\n  static defineHidden(context: Context, hiddenProps: IContextDef) {\n\n    // tslint:disable-next-line:forin\n    for (const prop in hiddenProps) {\n      Object.defineProperty(context, prop, {\n        enumerable: false,\n        writable: true,\n        value: hiddenProps[prop]\n      });\n    }\n\n    return context;\n  }\n\n  /** adds public properties only if they don't exist in parent */\n  static defineWeak(context: Context, props: IContextDef) {\n\n    // tslint:disable-next-line:forin\n    for (const prop in props) {\n      if (prop in context) continue;\n      Object.defineProperty(context, prop, {\n        enumerable: true,\n        writable: true,\n        value: props[prop]\n      });\n    }\n  }\n}\n","\n/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { OnDestroy, ChangeDetectorRef, Input, OnChanges, OnInit } from '@angular/core';\nimport { Observable, of, Subscription, combineLatest, isObservable } from 'rxjs';\nimport { tap, map } from 'rxjs/operators';\nimport { IWidgetDef } from './widget.interface';\nimport { WidgetDirective } from './widget.directive';\nimport { Context } from './context';\nimport { Expressions } from './expressions';\n\nexport interface IOptionDef { [prop: string]: any; }\n\n/**\n * Base class for all dynamic widget elements\n */\nexport abstract class AbstractWidget implements OnDestroy, OnChanges, OnInit {\n\n  /** Configuration of the widget */\n  @Input() widgetDef: IWidgetDef;\n  @Input() context: Context;\n\n  /** String identifing the 'type' of the widget */\n  type: string;\n  /** Context to use for evaluations at this level */\n\n  /** Widget specific options all converted to observables, to unify between *expression* and\n   * *constant* notation in the properties definition.\n   * Each binding then auto updates the corresponding property in the derived widget.\n   */\n  bindings: { [prop: string]: Observable<any> } = {};\n  /** The input configuration of this object */\n\n  content: IWidgetDef[];\n\n  element: WidgetDirective;\n\n  set addSubscription(subs: Subscription) {\n    this._subscriptions.push(subs);\n  }\n\n  private _subscriptions: Subscription[] = [];\n\n\n  constructor(protected _cdr: ChangeDetectorRef, protected _expr: Expressions) {\n  }\n\n  /** Initialices the widget from a json definition */\n  setup(element: WidgetDirective, def: IWidgetDef, context: Context) {\n    def = def || { type: 'none' };\n    def.options = def.options || {};\n\n    this.type = def.type || 'none';\n    this.element = element;\n\n    console.log(`Widget setup ${this.type}`, this);\n\n    this.context = context;\n\n    this.widgetDef = def = this.dynOnSetup(def) || def;\n\n    this.bindings = parseDefObject(def.options, this.context, true, this._expr);\n\n    this.content = Array.isArray(def.content) ? def.content : typeof def.content === 'object' ? [def.content] : [];\n\n    this.subscribeOptions();\n  }\n\n  /**\n   * Helper function to add a `map` pipe to the corresponding input observable\n   */\n  map(option: string, callback: (v: any) => any) {\n    const opt: Observable<any> = this.bindings[option];\n    if (opt) this.bindings[option] = opt.pipe(map(callback));\n\n  }\n  /**\n   * Hook to customize the observable bindings befor subscribing.\n   * Tipically using the `this.map()` function to add processing to specific options\n   */\n  dynOnBeforeBind() { }\n\n  dynOnAfterBind() { }\n\n  /** Hook to customize widget definition before procesing it */\n  dynOnSetup(def: IWidgetDef) { return def; }\n\n  subscribeOptions() {\n    const observables = [];\n\n    // call hook for cofiguration of options before updating the bound value\n    this.dynOnBeforeBind();\n\n    for (const prop in this.bindings) // tslint:disable-line:forin\n      this.bindings[prop] = this.bindings[prop].pipe(tap(res => this[prop] = res));\n\n    // call hook after updating the bound value\n    this.dynOnAfterBind();\n\n    for (const prop in this.bindings) // tslint:disable-line:forin\n      observables.push(this.bindings[prop]);\n\n    this.addSubscription = combineLatest(observables).subscribe(() => this._cdr.markForCheck());\n\n  }\n\n  ngOnDestroy() {\n    this._unsubscribe();\n  }\n\n  /**\n   * OnChanges is never called on dynamic widget instantiation\n   * It is intended to provide the same interface is the widget is used declarative in a template\n   * instead of dynamically\n   */\n  ngOnChanges() {\n    console.log(`Widget OnChanges ${this.type}`, this);\n    this._unsubscribe();\n    this.setup(null, this.widgetDef, this.context);\n  }\n\n  ngOnInit() {\n    console.log(`Widget OnInit ${this.type}`, this);\n  }\n\n  private _unsubscribe() {\n    for (const subs of this._subscriptions) subs.unsubscribe();\n  }\n\n}\n\nexport function parseDefObject(objDef: IOptionDef, context: Context, asObservable: boolean, expr: Expressions) {\n\n  const result: IOptionDef = {};\n\n  if (!objDef) return null;\n\n  for (const prop in objDef) {\n\n    if (prop.charAt(prop.length - 1) === '=') {\n      if (typeof objDef[prop] !== 'string') throw new SyntaxError('Binding options must be \"string\" Iexpressions');\n      result[prop.slice(0, prop.length - 1)] = expr.eval(objDef[prop], context, asObservable);\n\n    } else result[prop] = asObservable && !isObservable(objDef[prop]) ? of(objDef[prop]) : objDef[prop];\n  }\n  return result;\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport {\n  ReactiveEval, StaticEval, Parser, es5Rules,\n  IdentifierRule, BinaryOperatorRule, MEMBER_EXP\n} from 'espression';\nimport { isObservable, of, EMPTY } from 'rxjs';\nimport { Context } from './context';\n\nexport interface IAst {\n  type: string;\n  [prop: string]: any;\n}\n\nexport abstract class Expressions {\n\n  abstract parseKey(expression: string): IAst;\n  abstract parse(expression: string): IAst;\n  /**\n   * Evaluates an expression in the given context.\n   * It uses the general parser.\n   *\n   * @param expression String expression\n   * @param context\n   * @param asObservable Always converts result to observable\n   */\n  eval(expression: string, context: Context, asObservable: boolean) {\n    const ast = this.parse(expression);\n\n    return this.evaluate(ast, context, asObservable);\n  }\n  abstract evaluate(ast: IAst, context: Context, asObservable: boolean): any;\n  abstract lvalue(expression: string, context: Context): { o, m };\n}\n\n\n/**\n * Service for Parsing and for evaluating expressions in Widget's configuration\n * The funcionality is provided by the ESpression package\n *\n */\nexport class ESpression extends Expressions {\n\n  private _parser: Parser;\n  private _keyParser: Parser;\n\n  private _rxEval: StaticEval;\n\n  constructor() {\n\n    super();\n    const es5 = es5Rules();\n\n    // remove Progam / Statements rules, and keep only expressions\n    es5[0] = [];\n\n    this._parser = new Parser(es5);\n\n\n    const identifierRule = new IdentifierRule({ thisStr: null, literals: {} });\n    this._keyParser = new Parser([\n      [new BinaryOperatorRule({\n        '.': {\n          type: MEMBER_EXP,\n          extra: { computed: false },\n          noop: true,\n          left: 'object', right: 'property',\n          rules: [[identifierRule]]\n        }\n      })],\n      [identifierRule]\n    ]);\n\n    this._rxEval = new ReactiveEval();\n  }\n\n  /**\n   * Parses the string expression using the general parsing rules.\n   *\n   * * @param expression\n   */\n  parse(expression: string): IAst {\n    let result: IAst;\n    try {\n      result = this._parser.parse(expression);\n    } catch (e) {\n      console.warn('Parsing Error', e.message, '\\n', expression);\n      result = undefined;\n    }\n\n    return result;\n  }\n\n  /**\n   * Parses the string expression using the restricted 'key' parsing rules,\n   * intended to parse bindings to model keys.\n   * As they must be lvalues the rules are more limited.\n   *\n   * @param expression\n   */\n  parseKey(expression: string): IAst {\n    let result: IAst;\n    try {\n      result = this._keyParser.parse(expression);\n    } catch (e) {\n      console.warn('Parsing Error', e.message, '\\n', expression);\n      result = undefined;\n    }\n\n    return result;\n  }\n\n  /**\n   * Evaluate an AST in the given context.\n   *\n   * @param ast Parsed expression to evaluate\n   * @param context\n   * @param asObservable Always converts result to observable\n   */\n  evaluate(ast: IAst, context: Context, asObservable: boolean) {\n    if (!ast) return asObservable ? EMPTY : undefined;\n\n    let result;\n    try {\n      result = this._rxEval.eval(ast, context);\n    } catch (e) {\n      console.warn('Error evaluating expression: ', e.message);\n      return asObservable ? of(undefined) : undefined;\n    }\n\n    return asObservable && !isObservable(result) ? of(result) : result;\n  }\n\n  /**\n   * Evaluates an expression using *key* parsing rules and returns and lvalue object:\n   * {o: evaluated_object, m: member}\n   *\n   * @param expression\n   * @param context\n   */\n  lvalue(expression: string, context: Context): { o, m } {\n    let result;\n\n    const ast = this.parseKey(expression);\n\n    if (!ast) return null;\n    try {\n      result = this._rxEval.lvalue(ast, context);\n    } catch (e) {\n      console.warn('Error evaluating expression: ', e.message);\n      return undefined;\n    }\n\n    return result;\n  }\n\n\n  /**\n   * Expression version of the Array.map function.\n   * I replaces each array/object member with the result of evaluating an expression.\n   * The expression gets in its eval context the variables:\n   * `$object` the original object being maped\n   * `$value` the current value\n   * `$index` for arrays, the current index being replaced\n   * `$key` for objects, the current key\n   */\n  mapFactory() {\n    const self = this;\n    return function map(obj: Array<any> | Object, expression: string): Array<any> | Object {\n\n      if (!expression || typeof expression !== 'string') return obj;\n\n\n      const ast = self._parser.parse(expression);\n      if (!ast) return obj;\n\n      if (Array.isArray(obj)) {\n\n        return obj.map((value, index) =>\n          self._rxEval.eval(ast, Context.create(this, { // tslint:disable-line:no-invalid-this\n            $object: obj,\n            $value: value,\n            $index: index\n          })));\n      }\n      if (typeof obj === 'object') {\n\n        const result = {};\n\n        for (const prop in obj) // tslint:disable-line:forin\n\n          result[prop] = self._rxEval.eval(ast, Context.create(this, { // tslint:disable-line:no-invalid-this\n            $object: obj,\n            $value: obj[prop],\n            $key: prop\n          }));\n\n        return result;\n      }\n      return obj;\n    };\n  }\n\n  /**\n  * Expression version of the Array.reduce function.\n   * I replaces each array/object member with the result of evaluating an expression.\n   * The expression gets in its eval context the variables:\n   * `$object` the original object being maped\n   * `$value` the current element\n   * `$index` for arrays, the current index being replaced\n   * `$key` for objects, the current key\n   * `$prev` the previously returned value (the acumulation)\n   * @param obj\n   * @param expression\n   * @param initValue\n   */\n  reduceFactory() {\n    const self = this;\n\n    return function reduce(obj: Array<any> | Object, expression: string, initValue: any): Array<any> | Object {\n\n      if (!expression || typeof expression !== 'string') return obj;\n\n      const ast = self._parser.parse(expression);\n      if (!ast) return initValue;\n\n      if (Array.isArray(obj)) {\n        return obj.reduce(\n          (prev, value, index) =>\n\n            self._rxEval.eval(ast, Context.create(this, { // tslint:disable-line:no-invalid-this\n              $object: obj,\n              $prev: prev,\n              $value: value,\n              $index: index\n            })), initValue);\n      }\n      if (typeof obj === 'object') {\n\n        let result = initValue;\n\n        for (const prop in obj) // tslint:disable-line:forin\n\n          result = self._rxEval.eval(ast, Context.create(this, { // tslint:disable-line:no-invalid-this\n            $prev: result,\n            $value: obj[prop],\n            $key: prop\n          }));\n\n        return result;\n      }\n      return obj;\n    };\n  }\n}\n\nexport const expressionProvider = {\n  provide: Expressions,\n  useClass: ESpression\n};\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef} from '@angular/core';\nimport { AbstractWidget } from './abstractwidget';\nimport { Expressions } from './expressions';\n\n@Component({\n  selector: 'wdg-default',\n  template: '<div>Unknown widget \"{{type}}\"</div>',\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DefaultWidgetComponent extends AbstractWidget {\n\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { Type, Inject, InjectionToken, Injectable } from '@angular/core';\nimport { AbstractWidget } from './abstractwidget';\nimport { DefaultWidgetComponent } from './defaultwidget.component';\n\nexport const AF_CONFIG_TOKEN = new InjectionToken<IAutoFormConfig>('AF_CONFIG_TOKEN');\n\n\nexport interface IWidgetConf {\n  type: string;\n  component: Type<AbstractWidget>;\n}\n\nexport interface IAutoFormConfig {\n  widgets?: IWidgetConf[] | IWidgetConf;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WidgetRegistry {\n\n  private _registry = new Map<string, Type<AbstractWidget>>();\n\n  private _default: Type<AbstractWidget>;\n\n\n  constructor(@Inject(AF_CONFIG_TOKEN) configs: IAutoFormConfig[] = []) {\n\n    configs.forEach(conf => conf.widgets && this.register(conf.widgets));\n\n    this._default = this._registry.get('default') || DefaultWidgetComponent;\n  }\n\n  register(widgets: IWidgetConf[] | IWidgetConf) {\n    if (!widgets) return;\n    if (!Array.isArray(widgets)) widgets = [widgets];\n\n    widgets.forEach(widget => {\n      if (widget.type && widget.component) this._registry.set(widget.type, widget.component);\n    });\n  }\n\n\n\n\n  get(type: string): Type<AbstractWidget> {\n    return this._registry.get(type) || this._default;\n  }\n\n}\n","import {\n  Directive, Input,\n  ViewContainerRef,\n  ComponentFactoryResolver, ComponentRef,\n  OnChanges, OnDestroy, Optional, Inject, InjectionToken,\n} from '@angular/core';\nimport { WidgetRegistry } from './widgetregistry.service';\nimport { Subscription } from 'rxjs';\nimport { AbstractWidget, parseDefObject } from './abstractwidget';\nimport { IWidgetDef } from './widget.interface';\nimport { Context } from './context';\nimport { Expressions } from './expressions';\n\n/** Injection token used to provide the default root context for widgets */\nexport const ROOT_CONTEXT = new InjectionToken<Context>('Widgets Root Context');\n\n@Directive({\n  selector: '[wdgWidget]'\n})\nexport class WidgetDirective implements OnChanges, OnDestroy {\n\n  @Input() wdgWidget: IWidgetDef;\n  @Input() parentContext: Context;\n\n  widget: AbstractWidget;\n  context: Context;\n  private _widgetRef: ComponentRef<AbstractWidget>;\n  private _ifSubs: Subscription;\n\n  constructor(\n    private _container: ViewContainerRef,\n    private _registry: WidgetRegistry,\n    private _cfr: ComponentFactoryResolver,\n    @Optional() @Inject(ROOT_CONTEXT) private _rootContext: Context,\n    private _expr: Expressions\n  ) {\n  }\n\n  ngOnChanges() {\n\n    this._preCreate();\n\n  }\n\n  ngOnDestroy() {\n    this._destroy();\n    this._unsuscribe();\n  }\n\n  private _preCreate() {\n    this.wdgWidget = this.wdgWidget || { type: 'none' };\n    this.parentContext = this.parentContext || this._rootContext;\n    this.context = Context.create(this.parentContext, parseDefObject(this.wdgWidget.context, this.parentContext, false, this._expr));\n\n    this._destroy();\n    this._unsuscribe();\n\n    if (this.wdgWidget.if) {\n      this._ifSubs = this._expr.eval(this.wdgWidget.if, this.context, true).subscribe(cond => {\n        if (cond && !this._widgetRef) this._create();\n        else this._destroy();\n      });\n    } else this._create();\n\n\n  }\n\n  private _create() {\n\n    const widgetClass = this._registry.get(this.wdgWidget.type);\n    const factory = this._cfr.resolveComponentFactory(widgetClass);\n    this._widgetRef = this._container.createComponent(factory);\n    this.widget = this._widgetRef.instance;\n\n    this.widget.setup(this, this.wdgWidget, this.context);\n\n  }\n\n  private _destroy() {\n    if (this._widgetRef) {\n      this._widgetRef.destroy();\n      this._widgetRef = null;\n    }\n\n  }\n\n  private _unsuscribe() {\n\n    if (this._ifSubs) {\n      this._ifSubs.unsubscribe();\n      this._ifSubs = null;\n    }\n  }\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { formatNumber, formatDate } from '@angular/common';\nimport { Pipe, PipeTransform } from '@angular/core';\n\n/** Angular Pipe to format text */\n@Pipe({\n  name: 'format',\n  pure: true\n})\nexport class FormatPipe implements PipeTransform {\n  transform(value: any, format: any) {\n    return format ? formatValue(value, format) : value;\n  }\n}\n\nexport function formatValue(value: any, format: string) {\n  if (typeof format !== 'string' || value == null) return value;\n  const re = /^\\s*(\\w+)\\s*(:([\"'])([^\"']*)\\3)?$/;\n\n  const match: RegExpExecArray = re.exec(format);\n\n  if (!match[0]) return value;\n\n  switch (match[1].toUpperCase()) {\n    case 'NUMBER':\n      let num;\n      num = parseFloat(value);\n      return isNaN(num) ? value : formatNumber(num, 'en-US', match[4]);\n    case 'DATE':\n      return formatDate(value, match[4], 'en-US');\n  }\n\n  return value;\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { IWidgetDef } from './widget.interface';\nimport { Context } from './context';\n\n@Component({\n  selector: 'wdg-widget',\n  template: '<ng-container [wdgWidget]=\"widgetDef\" [parentContext]=\"parentContext\"></ng-container>',\n\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RoutedWidgetComponent implements OnInit {\n\n  widgetDef: IWidgetDef;\n  parentContext: Context;\n\n  constructor(private _route: ActivatedRoute) { }\n  ngOnInit() {\n    this.widgetDef = this._route.snapshot.data.widgetDef || { type: 'empty' };\n    this.parentContext = this._route.snapshot.data.parentContext;\n  }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule, ModuleWithProviders, ANALYZE_FOR_ENTRY_COMPONENTS } from '@angular/core';\n\nimport { DefaultWidgetComponent } from './defaultwidget.component';\nimport { AF_CONFIG_TOKEN, IAutoFormConfig } from './widgetregistry.service';\nimport { WidgetDirective } from './widget.directive';\nimport { FormatPipe } from './format';\nimport { RoutedWidgetComponent } from './routedwidget.component';\n\n\n@NgModule({\n\n  imports: [CommonModule],\n  declarations: [\n    WidgetDirective,\n    RoutedWidgetComponent,\n    DefaultWidgetComponent,\n    FormatPipe\n  ],\n  entryComponents: [DefaultWidgetComponent],\n  exports: [\n    WidgetDirective,\n    RoutedWidgetComponent,\n    FormatPipe\n  ]\n})\nexport class WidgetsCoreModule {\n\n  static forRoot(config: IAutoFormConfig = {}): ModuleWithProviders {\n    return {\n      ngModule: WidgetsCoreModule,\n      providers: [\n        { provide: AF_CONFIG_TOKEN, useValue: config, multi: true },\n        { provide: ANALYZE_FOR_ENTRY_COMPONENTS, useValue: config, multi: true }\n      ]\n    };\n  }\n}\n\n\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { FormControl, FormGroup, FormArray, AbstractControl } from '@angular/forms';\nimport { ChangeDetectorRef} from '@angular/core';\nimport { GET_OBSERVABLE, isReactive, INode } from 'espression';\nimport { take, map } from 'rxjs/operators';\nimport { AbstractWidget } from './abstractwidget';\nimport { Context } from './context';\nimport { Expressions } from './expressions';\nimport { IWidgetDef } from './widget.interface';\n\n\nexport const FORM_CONTROL = Symbol('FormControl');\nexport class AbstractFormFieldWidget extends AbstractWidget {\n\n\n  formControl: FormControl;\n\n  validate: INode;\n  validateContext: Context;\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n  dynOnSetup(def: IWidgetDef): IWidgetDef {\n\n    // get bound model\n    if (!def.bind)\n      throw new Error('Form field widgets must have a \"bind\" property defined');\n\n    const lvalue = this._expr.lvalue(def.bind, this.context);\n\n    if (!lvalue)\n      throw new Error('Form field \"bind\" property must be an identifier or member expression');\n\n    if (!isReactive(lvalue.o))\n      throw new Error('Bound Key must be of Reactive Type');\n\n\n    // setup validation\n\n\n    if (def.validate && (this.validate = this._expr.parse(def.validate))) {// tslint:disable-line:whitespace\n      this.validateContext = Context.create(this.context);\n\n      this.formControl = new FormControl(null, null, (ctrl: AbstractControl) => {\n        this.validateContext['$value'] = ctrl.value;\n        return this._expr.evaluate(this.validate, this.validateContext, true).pipe(\n          take(1),\n          map(res => {\n            return res ? null : { validate: 'validation error' };\n          })\n        );\n      });\n    } else this.formControl = new FormControl();\n\n    const parentForm: FormGroup | FormArray = this.context[FORM_CONTROL];\n    if (parentForm) {\n      if (parentForm instanceof FormGroup) parentForm.addControl(lvalue.m, this.formControl);\n      else if (parentForm instanceof FormArray) parentForm.push(this.formControl);\n    }\n\n    // listen to bound context value and update on changes\n    this.addSubscription = lvalue.o[GET_OBSERVABLE](lvalue.m).subscribe(val =>\n      val !== this.formControl.value && this.formControl.setValue(val));\n\n    // listen to control changes to update bound context value\n    this.addSubscription = this.formControl.valueChanges.subscribe(val => {\n      if (val !== lvalue.o[lvalue.m])\n        lvalue.o[lvalue.m] = val;\n    });\n\n\n    return def;\n  }\n}\n","/*!\n * Copyright (c) 2017 Adrian Panella <ianchi74@outlook.com>, contributors.\n * Licensed under the MIT license.\n */\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatListModule } from '@angular/material/list';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatMenuModule } from '@angular/material/menu';\n\n/**\n * Helper module to centrally import all material components\n */\n@NgModule({\n  exports: [\n    CommonModule,\n    ReactiveFormsModule,\n\n    MatAutocompleteModule,\n    MatSidenavModule,\n    MatButtonModule,\n    MatIconModule,\n    MatListModule,\n    MatInputModule,\n    MatDialogModule,\n    MatToolbarModule,\n    MatProgressBarModule,\n    MatExpansionModule,\n    MatSelectModule,\n    MatTabsModule,\n    MatSnackBarModule,\n    MatSlideToggleModule,\n    MatChipsModule,\n    MatCardModule,\n    MatCheckboxModule,\n    MatSliderModule,\n    MatTableModule,\n    MatPaginatorModule,\n    MatSortModule,\n    MatMenuModule,\n  ]\n})\nexport class MaterialModule { }\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { Expressions, AbstractFormFieldWidget } from '../../../core';\n\n@Component({\n  selector: 'wdg-input',\n  template: `<mat-form-field style.width=\"100%\">\n\n    <mat-label *ngIf=\"title\">\n        {{ title }}\n    </mat-label>\n\n    <input matInput\n           name=\"aaa\"\n           [type]=\"type || 'text'\"\n           [formControl]=\"formControl\"\n           [placeholder]=\"placeholder\"\n           [required]=\"required\">\n\n    <mat-error [id]=\"null\">\n\n    </mat-error>\n\n    <mat-hint *ngIf=\"description\"\n              [id]=\"null\">\n        {{ description }}\n    </mat-hint>\n\n</mat-form-field>\n`,\n  styles: [``],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class InputWidgetComponent extends AbstractFormFieldWidget {\n\n  title: string;\n  description: string;\n  placeholder: string;\n  required: boolean;\n\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { Expressions, AbstractFormFieldWidget } from '../../../core';\n\n@Component({\n  selector: 'wdg-checkbox',\n  template: `<mat-checkbox labelPosition=\"before\" [formControl]=\"formControl\">\n  {{title}}\n</mat-checkbox>\n`,\n  styles: [``],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CheckboxWidgetComponent extends AbstractFormFieldWidget {\n  title: string;\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { Expressions, AbstractFormFieldWidget } from '../../../core';\n\n@Component({\n  selector: 'wdg-toggle',\n  template: `<mat-slide-toggle labelPosition=\"before\">\n  {{ title}}\n</mat-slide-toggle>\n`,\n  styles: [``],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ToggleWidgetComponent extends AbstractFormFieldWidget {\n\n  title: string;\n\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { Expressions, AbstractFormFieldWidget } from '../../../core';\n\n@Component({\n  selector: 'wdg-slider',\n  template: `<span>{{title}}</span>\n<mat-slider [formControl]=\"formControl\"></mat-slider>\n`,\n  styles: [``],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SliderWidgetComponent extends AbstractFormFieldWidget {\n\n  title: string;\n\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { isReactive } from 'espression';\nimport { AbstractWidget, Expressions, IWidgetDef, } from '../../../core';\n\n@Component({\n  selector: 'wdg-button',\n  template: `<button mat-button (click)=\"clickEvent($event)\">\n  {{title}}\n</button>\n`,\n  styles: [``],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ButtonWidgetComponent extends AbstractWidget {\n\n  title: string;\n  click: string;\n\n  private _lvalue: { o, m };\n  private _clickSubs: Subscription;\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n  dynOnSetup(def: IWidgetDef) {\n\n    if (def.bind) {\n\n      const lvalue = this._expr.lvalue(def.bind, this.context);\n\n      if (!lvalue)\n        throw new Error('Form field \"bind\" property must be an identifier or member expression');\n\n      if (!isReactive(lvalue.o))\n        throw new Error('Bound Key must be of Reactive Type');\n\n      this._lvalue = lvalue;\n    }\n\n    return def;\n  }\n\n  clickEvent(_event) {\n\n    if (this._clickSubs) {\n      this._clickSubs.unsubscribe();\n      this._clickSubs = null;\n    }\n\n    if (this.click) {\n      this._clickSubs = this._expr.eval(this.click, this.context, true).pipe(\n        take(1)).subscribe(res =>\n          this._lvalue.o[this._lvalue.m] = res);\n    }\n  }\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { RxObject } from 'espression';\nimport { AbstractWidget, IWidgetDef, Context, Expressions, FORM_CONTROL } from '../../../core';\n\n@Component({\n  selector: 'wdg-form',\n  template: `<ng-container *ngFor=\"let element of content\" [wdgWidget]=\"element\" [parentContext]=\"context\">\n\n</ng-container>\n`,\n  styles: [``],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FormWidgetComponent extends AbstractWidget {\n\n  formGroup: FormGroup;\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n  dynOnSetup(def: IWidgetDef) {\n\n    this.formGroup = new FormGroup({});\n\n    // register with parent form, if any\n    const parentForm: FormGroup | FormArray = this.context[FORM_CONTROL];\n    if (parentForm) {\n      if (parentForm instanceof FormGroup) parentForm.addControl('control', this.formGroup);\n      else if (parentForm instanceof FormArray) parentForm.push(this.formGroup);\n    }\n\n    // save this FormGroup as parent form for the children\n    Context.defineHidden(this.context, { [FORM_CONTROL]: this.formGroup });\n\n    // create a Store for the variables\n\n    this.context['$model'] = RxObject({});\n    return def;\n  }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport { Expressions, AbstractFormFieldWidget } from '../../../core';\n\n@Component({\n  selector: 'wdg-autocomplete',\n  template: `<mat-form-field style.width=\"100%\">\n\n  <mat-label *ngIf=\"title\">\n    {{ title }}\n  </mat-label>\n\n  <input matInput name=\"aaa\" [type]=\"type || 'text'\" [formControl]=\"formControl\" [placeholder]=\"placeholder\"\n    [matAutocomplete]=\"auto\">\n\n  <mat-error [id]=\"null\">\n\n  </mat-error>\n\n  <mat-hint *ngIf=\"description\" [id]=\"null\">\n    {{ description }}\n  </mat-hint>\n\n  <mat-autocomplete #auto=\"matAutocomplete\">\n    <mat-option *ngFor=\"let option of filteredOptions | async; index as optIndex\" [value]=\"option\">\n      {{option}}\n    </mat-option>\n  </mat-autocomplete>\n\n</mat-form-field>\n`,\n  styles: [``],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AutocompleteWidgetComponent extends AbstractFormFieldWidget implements OnInit {\n\n  title: string;\n  description: string;\n  placeholder: string;\n\n  enum: string[] = [];\n  enumLabel: string[];\n  filteredOptions: Observable<string[]>;\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n\n\n  dynOnBeforeBind() {\n    this.map('enum', val => {\n      return Array.isArray(val) ? val : [];\n    });\n  }\n\n  dynOnAfterBind() {\n    this.map('enum', val => (this._filter(this.formControl.value), val));\n  }\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.filteredOptions = this.formControl.valueChanges\n      .pipe(\n        startWith(''),\n        map(value => this._filter(value))\n      );\n  }\n\n  private _filter(value: string): string[] {\n\n    const filterValue = value && value.toLowerCase();\n\n    return this.enum.filter(option => option.toLowerCase().includes(filterValue));\n  }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\n\nimport { NgModule } from '@angular/core';\n\nimport { MaterialModule } from '../material.module';\nimport { WidgetsCoreModule } from '../../core';\n\nimport { InputWidgetComponent } from './input/input.component';\nimport { CheckboxWidgetComponent } from './checkbox/checkbox.component';\nimport { ToggleWidgetComponent } from './toggle/toggle.component';\nimport { SliderWidgetComponent } from './slider/slider.component';\nimport { ButtonWidgetComponent } from './button/button.component';\nimport { FormWidgetComponent } from './form/form.component';\nimport { AutocompleteWidgetComponent } from './autocomplete/autocomplete.component';\n\n\n@NgModule({\n  imports: [\n    MaterialModule,\n\n    WidgetsCoreModule.forRoot({\n      widgets: [\n        { type: 'input', component: InputWidgetComponent },\n        { type: 'checkbox', component: CheckboxWidgetComponent },\n        { type: 'toggle', component: ToggleWidgetComponent },\n        { type: 'slider', component: SliderWidgetComponent },\n        { type: 'button', component: ButtonWidgetComponent },\n        { type: 'form', component: FormWidgetComponent },\n        { type: 'autocomplete', component: AutocompleteWidgetComponent },\n\n      ]\n    })\n  ],\n  declarations: [\n    InputWidgetComponent,\n    CheckboxWidgetComponent,\n    ToggleWidgetComponent,\n    SliderWidgetComponent,\n    ButtonWidgetComponent,\n    FormWidgetComponent,\n    AutocompleteWidgetComponent\n  ],\n  exports: []\n})\nexport class FormFieldWidgetsModule { }\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef} from '@angular/core';\nimport { AbstractWidget, IWidgetDef, Expressions } from '../../../core';\n\n@Component({\n  selector: 'wdg-card',\n  template: `<mat-card>\n  <mat-card-title *ngIf=\"title\">{{title}}</mat-card-title>\n  <mat-card-subtitle *ngIf=\"description\">{{description}}</mat-card-subtitle>\n  <mat-card-content>\n    <ng-container *ngFor=\"let element of content\" [wdgWidget]=\"element\" [parentContext]=\"context\"></ng-container>\n  </mat-card-content>\n  <mat-card-actions align=\"end\" *ngIf=\"actions\">\n    <ng-container *ngFor=\"let element of actions\" [wdgWidget]=\"element\" [parentContext]=\"context\"></ng-container>\n  </mat-card-actions>\n</mat-card>\n`,\n  styles: [``],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CardWidgetComponent extends AbstractWidget {\n\n  title: string;\n  description: string;\n  actions: IWidgetDef[];\n\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\n\nimport { Component, OnInit, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef, ViewChild} from '@angular/core';\nimport { Observable, isObservable } from 'rxjs';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { AbstractWidget, Context, Expressions, parseDefObject } from '../../../core';\nimport { combineMixed } from 'espression';\n\n@Component({\n  selector: 'wdg-table',\n  template: `<div>\n  <section class=\"table-title\">\n    <h6>{{title}}</h6>\n\n    <div class=\"spacer\"></div>\n\n    <mat-form-field *ngIf=\"filterBy\">\n      <input matInput (keyup)=\"applyFilter($event.target.value)\" placeholder=\"Filter\">\n    </mat-form-field>\n  </section>\n\n  <section class=\"mat-elevation-z1\">\n    <table mat-table [dataSource]=\"tableDataSource\" matSort [matSortDisabled]=\"!disableSort\">\n\n      <!-- Dynamic Column definitions-->\n      <ng-container [matColumnDef]=\"colKey\" *ngFor=\"let colKey of colKeys; index as colIndex\">\n        <th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]=\"disableSort?.indexOf(colKey) >= 0\"> {{colHeaders[colIndex] || colKey}} </th>\n        <ng-container *ngIf=\"colFormat && colFormat[colIndex]; else noFormatCellDef\">\n          <td mat-cell *matCellDef=\"let rowData\">{{rowData[colKey] | format:colFormat[colIndex]}}</td>\n        </ng-container>\n        <ng-template #noFormatCellDef>\n          <td mat-cell *matCellDef=\"let rowData\">{{rowData[colKey]}}</td>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"actions?.length\" [matColumnDef]=\"'__actions__'\">\n        <th mat-header-cell *matHeaderCellDef > {{actionsHeader || 'Actions'}} </th>\n        <td mat-cell *matCellDef=\"let rowData\">\n          <button mat-icon-button [matMenuTriggerFor]=\"menu\">\n            <mat-icon svgIcon=\"dots-vertical\"></mat-icon>\n          </button>\n          <mat-menu #menu=\"matMenu\">\n\n            <button mat-menu-item *ngFor=\"let action of actions; index as actionIndex\" (click)=\"actionClick(rowData, actionIndex)\">\n              <mat-icon [svgIcon]=\"actions[actionIndex].icon\"></mat-icon>\n              <span>{{actions[actionIndex].label}}</span>\n            </button>\n          </mat-menu>\n        </td>\n      </ng-container>\n\n\n      <!-- Row definitions-->\n      <ng-container *ngIf=\"colHeaders\">\n        <tr mat-header-row *matHeaderRowDef=\"showCols\" class=\"header-row\"></tr>\n      </ng-container>\n      <tr mat-row *matRowDef=\"let element; columns: showCols;\" class=\"data-row\"></tr>\n    </table>\n\n    <mat-paginator [class.hiddenPaginator]=\"!pageSizes\" [pageSizeOptions]=\"pageSizes\" [hidePageSize]=\"pageSizes?.length<=1\"></mat-paginator>\n  </section>\n</div>\n`,\n  styles: [`dyn-table table{width:100%}dyn-table tr.data-row:hover{background:#f5f5f5}dyn-table tr.data-row:active{background:#efefef}dyn-table .data-row td{border-bottom-width:0}dyn-table mat-paginator.hiddenPaginator{display:none}dyn-table .table-title{display:flex;flex-flow:row}dyn-table .table-title>*{flex:0 0 auto}dyn-table .table-title .spacer{flex:1 1 auto}`],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TableWidgetComponent extends AbstractWidget implements OnInit {\n\n  title: string;\n  dataSource: Observable<any[]> | any[];\n  tableDataSource: MatTableDataSource<{ [prop: string]: any }>;\n\n  colKeys: string[];\n  colHeaders: string[];\n  colsVisible: string[];\n  pageSizes: number[];\n  filterBy: string[];\n  disableSort: string[] = [];\n\n  colTransform: string[];\n  colFormat: string[];\n\n  actions: { icon: string, label: string, action: string }[] = [];\n  actionsHeader: string;\n  showCols: string[];\n\n  @ViewChild(MatPaginator) paginator: MatPaginator;\n  @ViewChild(MatSort) sort: MatSort;\n\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n    this.tableDataSource = new MatTableDataSource();\n  }\n\n  dynOnBeforeBind() {\n\n    const opt = this.widgetDef.options;\n\n\n    // if the only source is a static array, lets check if it has 'property=' columns to evaluate\n    // and add the auto binding\n    if (opt && !opt['dataSource='] &&\n      Array.isArray(opt.dataSource)) {\n\n      const dataSource = <Observable<any[]>>combineMixed(opt.dataSource.map(row =>\n        combineMixed(parseDefObject(row, this.context, false, this._expr)), false), false);\n      if (isObservable(dataSource)) this.bindings.dataSource = dataSource;\n      else this.dataSource = dataSource;\n    }\n\n\n    this.map('disableSort', sort => {\n      if (sort === true) return null;\n      if (!Array.isArray(sort)) return [];\n      return sort;\n\n    });\n\n    this.map('dataSource', (table: any[]) =>\n      this.tableDataSource.data = table.map(row => {\n        row = parseDefObject(row, Context.create(this.context, { $data: row }), false, this._expr);\n\n        if (Array.isArray(this.colTransform)) {\n\n          for (let i = 0; i < this.colTransform.length; i++) {\n            if (this.colTransform[i]) {\n              const context: any = Context.create(this.context);\n              context.$data = row[this.colKeys[i]];\n              row[this.colKeys[i]] = this._expr.eval(this.colTransform[i], context, false);\n            }\n          }\n\n        }\n\n        return row;\n      })\n    );\n\n    this.map('pageSizes', (value) => {\n      if (!Array.isArray(value) || !value.length) {\n        this.tableDataSource.paginator = null;\n        return null;\n      }\n      this.tableDataSource.paginator = this.paginator;\n      return value;\n    });\n\n    this.map('colKeys', keys => {\n      if (this.actions && this.actions.length) this.showCols = keys.concat('__actions__');\n      else this.showCols = keys;\n      return keys;\n    });\n    this.map('actions', actions => {\n      if (!Array.isArray(actions)) actions = [];\n\n      this.showCols = actions.length ? this.colKeys.concat('__actions__') : this.colKeys;\n\n      return actions;\n    });\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.tableDataSource.sort = this.sort;\n  }\n  applyFilter(filterValue: string) {\n    this.tableDataSource.filter = filterValue;\n\n    if (this.tableDataSource.paginator) {\n      this.tableDataSource.paginator.firstPage();\n    }\n  }\n\n  actionClick(rowData: any, actionIndex: number) {\n\n    const context = Context.create(this.context, { $data: rowData });\n\n    this.addSubscription = this._expr.eval(this.actions[actionIndex].action, context, true).subscribe(\n      () => {\n        // TODO logic to reload table\n      }\n    );\n  }\n\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef} from '@angular/core';\nimport { AbstractWidget, Expressions } from '../../../core';\n\n@Component({\n  selector: 'wdg-container',\n  template: `<ng-container *ngFor=\"let element of content\" [wdgWidget]=\"element\" [parentContext]=\"context\">\n\n</ng-container>\n`,\n  styles: [`dyn-container.dyn-flex{display:flex;flex-wrap:wrap}dyn-container.dyn-flex>*{flex:1 1 auto}`],\n\n  // tslint:disable-next-line:use-host-property-decorator\n  host: {\n    '[class.dyn-flex]': 'true',\n    '[style.flex-direction]': 'direction'\n  },\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ContainerWidgetComponent extends AbstractWidget {\n\n  direction: string;\n\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n  dynOnBeforeBind() {\n\n    this.map('direction', dir => dir || 'row');\n  }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef} from '@angular/core';\nimport { AbstractWidget, Expressions } from '../../../core';\n\n@Component({\n  selector: 'wdg-grid-container',\n  template: `<ng-container *ngFor=\"let element of content\" [wdgWidget]=\"element\" [parentContext]=\"context\">\n\n</ng-container>\n`,\n  styles: [`dyn-grid-container.dyn-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));grid-auto-flow:row dense}`],\n\n  // tslint:disable-next-line:use-host-property-decorator\n  host: {\n    '[class.dyn-grid]': 'true',\n    '[style.flex-direction]': 'direction'\n  },\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class GridContainerWidgetComponent extends AbstractWidget {\n\n  direction: string;\n\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n  dynOnBeforeBind() {\n\n    this.map('direction', dir => dir || 'row');\n  }\n\n}\n","import { Component, OnInit, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { AbstractWidget, Expressions } from '../../../core';\n\n@Component({\n  selector: 'wdg-tabs',\n  template: `<mat-tab-group>\n\n  <mat-tab *ngFor=\"let tab of content; index as tabIndex\" [label]=\"tabLabels[tabIndex] || ('Tab'+tabIndex)\">\n\n    <ng-template matTabContent>\n      <ng-container [wdgWidget]=\"tab\" [parentContext]=\"context\"></ng-container>\n    </ng-template>\n\n  </mat-tab>\n\n\n</mat-tab-group>\n`,\n  styles: [``],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TabsWidgetComponent extends AbstractWidget implements OnInit {\n\n  tabLabels: string[];\n  constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n    super(cdr, expr);\n  }\n\n  ngOnInit() {\n  }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef} from '@angular/core';\nimport { AbstractWidget, Expressions } from '../../../core';\n\n@Component({\n    selector: 'wdg-code',\n    template: `<code>\n{{text}}\n</code>`,\n    styles: [`dyn-code code{white-space:pre}`],\n\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CodeWidgetComponent extends AbstractWidget {\n\n    text: string;\n\n    constructor(cdr: ChangeDetectorRef, expr: Expressions) {\n        super(cdr, expr);\n    }\n\n}\n","/**\n * Copyright (c) 2018 Adrian Panella <ianchi74@outlook.com>\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\n\nimport { NgModule } from '@angular/core';\n\nimport { MaterialModule } from '../material.module';\nimport { WidgetsCoreModule } from '../../core';\n\nimport { CardWidgetComponent } from './card/card.component';\nimport { TableWidgetComponent } from './table/table.component';\nimport { ContainerWidgetComponent } from './container/container.component';\nimport { GridContainerWidgetComponent } from './grid-container/gridcontainer.component';\nimport { TabsWidgetComponent } from './tabs/tabs.component';\nimport { CodeWidgetComponent } from './code/code.component';\n\n@NgModule({\n  imports: [\n    MaterialModule,\n\n    WidgetsCoreModule.forRoot({\n      widgets: [\n        { type: 'card', component: CardWidgetComponent },\n        { type: 'table', component: TableWidgetComponent },\n        { type: 'container', component: ContainerWidgetComponent},\n        { type: 'grid-container', component: GridContainerWidgetComponent},\n        { type: 'tabs', component: TabsWidgetComponent},\n        { type: 'code', component: CodeWidgetComponent},\n      ]\n    })\n  ],\n  declarations: [\n    CardWidgetComponent,\n    TableWidgetComponent,\n    ContainerWidgetComponent,\n    GridContainerWidgetComponent,\n    TabsWidgetComponent,\n    CodeWidgetComponent,\n  ],\n  exports: []\n})\nexport class CommonWidgetsModule { }\n"],"names":[],"mappings":"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"}
