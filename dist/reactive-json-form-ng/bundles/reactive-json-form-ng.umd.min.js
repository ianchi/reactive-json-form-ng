!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("espression"),require("@angular/common"),require("@angular/router"),require("@angular/forms"),require("@angular/material/button"),require("@angular/material/dialog"),require("@angular/material/icon"),require("@angular/material/input"),require("@angular/material/list"),require("@angular/material/sidenav"),require("@angular/material/card"),require("@angular/material/toolbar"),require("@angular/material/progress-bar"),require("@angular/material/expansion"),require("@angular/material/select"),require("@angular/material/tabs"),require("@angular/material/snack-bar"),require("@angular/material/slide-toggle"),require("@angular/material/chips"),require("@angular/material/autocomplete"),require("@angular/material/checkbox"),require("@angular/material/slider"),require("@angular/material/table"),require("@angular/material/paginator"),require("@angular/material/sort"),require("@angular/material/menu")):"function"==typeof define&&define.amd?define("reactive-json-form-ng",["exports","@angular/core","rxjs","rxjs/operators","espression","@angular/common","@angular/router","@angular/forms","@angular/material/button","@angular/material/dialog","@angular/material/icon","@angular/material/input","@angular/material/list","@angular/material/sidenav","@angular/material/card","@angular/material/toolbar","@angular/material/progress-bar","@angular/material/expansion","@angular/material/select","@angular/material/tabs","@angular/material/snack-bar","@angular/material/slide-toggle","@angular/material/chips","@angular/material/autocomplete","@angular/material/checkbox","@angular/material/slider","@angular/material/table","@angular/material/paginator","@angular/material/sort","@angular/material/menu"],e):e(t["reactive-json-form-ng"]={},t.ng.core,t.rxjs,t.rxjs.operators,null,t.ng.common,t.ng.router,t.ng.forms,t.ng.material.button,t.ng.material.dialog,t.ng.material.icon,t.ng.material.input,t.ng.material.list,t.ng.material.sidenav,t.ng.material.card,t.ng.material.toolbar,t.ng.material["progress-bar"],t.ng.material.expansion,t.ng.material.select,t.ng.material.tabs,t.ng.material["snack-bar"],t.ng.material["slide-toggle"],t.ng.material.chips,t.ng.material.autocomplete,t.ng.material.checkbox,t.ng.material.slider,t.ng.material.table,t.ng.material.paginator,t.ng.material.sort,t.ng.material.menu)}(this,function(t,o,i,a,s,c,e,l,n,r,u,p,d,g,f,m,h,y,b,v,x,w,C,_,D,O,S,M,P,I){"use strict";var E=function(){function i(){}return i.create=function(t,e,n,r,o){var a=t?Object.create(t):new i;return o&&i.defineReadonly(a,i.builtinsDef),e&&Object.assign(a,e),n&&i.defineReadonly(a,n),r&&i.defineHidden(a,r),a},i.defineReadonly=function(t,e){for(var n in e)Object.defineProperty(t,n,{enumerable:!0,writable:!1,value:e[n]});return t},i.defineHidden=function(t,e){for(var n in e)Object.defineProperty(t,n,{enumerable:!1,writable:!0,value:e[n]});return t},i.defineWeak=function(t,e){for(var n in e)n in t||Object.defineProperty(t,n,{enumerable:!0,writable:!0,value:e[n]})},i.builtinsDef={parseFloat:parseFloat,parseInt:parseInt,isNaN:isNaN,isFinite:isFinite,Number:Number,Math:Math,Date:Date,Array:Array,JSON:JSON,Object:Object},i}(),R=function(t,e){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function F(t,e){function n(){this.constructor=t}R(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var A=function(){function t(t,e){this._cdr=t,this._expr=e,this.bindings={},this._subscriptions=[]}return Object.defineProperty(t.prototype,"addSubscription",{set:function(t){this._subscriptions.push(t)},enumerable:!0,configurable:!0}),t.prototype.setup=function(t,e,n){(e=e||{type:"none"}).options=e.options||{},this.type=e.type||"none",this.element=t,console.log("Widget setup "+this.type,this),this.context=n,this.widgetDef=e=this.dynOnSetup(e)||e,this.bindings=k(e.options,this.context,!0,this._expr),this.content=Array.isArray(e.content)?e.content:"object"==typeof e.content?[e.content]:[],this.subscribeOptions()},t.prototype.map=function(t,e){var n=this.bindings[t];n&&(this.bindings[t]=n.pipe(a.map(e)))},t.prototype.dynOnBeforeBind=function(){},t.prototype.dynOnAfterBind=function(){},t.prototype.dynOnSetup=function(t){return t},t.prototype.subscribeOptions=function(){var n=this,t=[];this.dynOnBeforeBind();var e=function(e){r.bindings[e]=r.bindings[e].pipe(a.tap(function(t){return n[e]=t}))},r=this;for(var o in this.bindings)e(o);for(var o in this.dynOnAfterBind(),this.bindings)t.push(this.bindings[o]);this.addSubscription=i.combineLatest(t).subscribe(function(){return n._cdr.markForCheck()})},t.prototype.ngOnDestroy=function(){this._unsubscribe()},t.prototype.ngOnChanges=function(){console.log("Widget OnChanges "+this.type,this),this._unsubscribe(),this.setup(null,this.widgetDef,this.context)},t.prototype.ngOnInit=function(){console.log("Widget OnInit "+this.type,this)},t.prototype._unsubscribe=function(){try{for(var t=function e(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(this._subscriptions),n=t.next();!n.done;n=t.next()){n.value.unsubscribe()}}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=t["return"])&&o.call(t)}finally{if(r)throw r.error}}var r,o},t.propDecorators={widgetDef:[{type:o.Input}],context:[{type:o.Input}]},t}();function k(t,e,n,r){var o={};if(!t)return null;for(var a in t)if("="===a.charAt(a.length-1)){if("string"!=typeof t[a])throw new SyntaxError('Binding options must be "string" Iexpressions');o[a.slice(0,a.length-1)]=r.eval(t[a],e,n)}else o[a]=n&&!i.isObservable(t[a])?i.of(t[a]):t[a];return o}var N=function(){function t(){}return t.prototype.eval=function(t,e,n){var r=this.parse(t);return this.evaluate(r,e,n)},t}(),j=function(r){function t(){var t=r.call(this)||this,e=s.es5Rules();e[0]=[],t._parser=new s.Parser(e);var n=new s.IdentifierRule({thisStr:null,literals:{}});return t._keyParser=new s.Parser([[new s.BinaryOperatorRule({".":{type:s.MEMBER_EXP,extra:{computed:!1},noop:!0,left:"object",right:"property",rules:[[n]]}})],[n]]),t._rxEval=new s.ReactiveEval,t}return F(t,r),t.prototype.parse=function(t){var e;try{e=this._parser.parse(t)}catch(n){console.warn("Parsing Error",n.message,"\n",t),e=undefined}return e},t.prototype.parseKey=function(t){var e;try{e=this._keyParser.parse(t)}catch(n){console.warn("Parsing Error",n.message,"\n",t),e=undefined}return e},t.prototype.evaluate=function(t,e,n){if(!t)return n?i.EMPTY:undefined;var r;try{r=this._rxEval.eval(t,e)}catch(o){return console.warn("Error evaluating expression: ",o.message),n?i.of(undefined):undefined}return n&&!i.isObservable(r)?i.of(r):r},t.prototype.lvalue=function(t,e){var n,r=this.parseKey(t);if(!r)return null;try{n=this._rxEval.lvalue(r,e)}catch(o){return console.warn("Error evaluating expression: ",o.message),undefined}return n},t.prototype.mapFactory=function(){var i=this;return function t(n,t){var r=this;if(!t||"string"!=typeof t)return n;var o=i._parser.parse(t);if(!o)return n;if(Array.isArray(n))return n.map(function(t,e){return i._rxEval.eval(o,E.create(r,{$object:n,$value:t,$index:e}))});if("object"==typeof n){var e={};for(var a in n)e[a]=i._rxEval.eval(o,E.create(this,{$object:n,$value:n[a],$key:a}));return e}return n}},t.prototype.reduceFactory=function(){var s=this;return function t(r,t,e){var o=this;if(!t||"string"!=typeof t)return r;var a=s._parser.parse(t);if(!a)return e;if(Array.isArray(r))return r.reduce(function(t,e,n){return s._rxEval.eval(a,E.create(o,{$object:r,$prev:t,$value:e,$index:n}))},e);if("object"==typeof r){var n=e;for(var i in r)n=s._rxEval.eval(a,E.create(this,{$prev:n,$value:r[i],$key:i}));return n}return r}},t}(N),q={provide:N,useClass:j},W=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.decorators=[{type:o.Component,args:[{selector:"wdg-default",template:'<div>Unknown widget "{{type}}"</div>',encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(A),B=new o.InjectionToken("AF_CONFIG_TOKEN"),T=function(){function t(t){void 0===t&&(t=[]);var e=this;this._registry=new Map,t.forEach(function(t){return t.widgets&&e.register(t.widgets)}),this._default=this._registry.get("default")||W}return t.prototype.register=function(t){var e=this;t&&(Array.isArray(t)||(t=[t]),t.forEach(function(t){t.type&&t.component&&e._registry.set(t.type,t.component)}))},t.prototype.get=function(t){return this._registry.get(t)||this._default},t.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Array,decorators:[{type:o.Inject,args:[B]}]}]},t.ngInjectableDef=o.defineInjectable({factory:function e(){return new t(o.inject(B))},token:t,providedIn:"root"}),t}(),V=new o.InjectionToken("Widgets Root Context"),$=function(){function t(t,e,n,r,o){this._container=t,this._registry=e,this._cfr=n,this._rootContext=r,this._expr=o}return t.prototype.ngOnChanges=function(){this._preCreate()},t.prototype.ngOnDestroy=function(){this._destroy(),this._unsuscribe()},t.prototype._preCreate=function(){var e=this;this.wdgWidget=this.wdgWidget||{type:"none"},this.parentContext=this.parentContext||this._rootContext,this.context=E.create(this.parentContext,k(this.wdgWidget.context,this.parentContext,!1,this._expr)),this._destroy(),this._unsuscribe(),this.wdgWidget["if"]?this._ifSubs=this._expr.eval(this.wdgWidget["if"],this.context,!0).subscribe(function(t){t&&!e._widgetRef?e._create():e._destroy()}):this._create()},t.prototype._create=function(){var t=this._registry.get(this.wdgWidget.type),e=this._cfr.resolveComponentFactory(t);this._widgetRef=this._container.createComponent(e),this.widget=this._widgetRef.instance,this.widget.setup(this,this.wdgWidget,this.context)},t.prototype._destroy=function(){this._widgetRef&&(this._widgetRef.destroy(),this._widgetRef=null)},t.prototype._unsuscribe=function(){this._ifSubs&&(this._ifSubs.unsubscribe(),this._ifSubs=null)},t.decorators=[{type:o.Directive,args:[{selector:"[wdgWidget]"}]}],t.ctorParameters=function(){return[{type:o.ViewContainerRef},{type:T},{type:o.ComponentFactoryResolver},{type:E,decorators:[{type:o.Optional},{type:o.Inject,args:[V]}]},{type:N}]},t.propDecorators={wdgWidget:[{type:o.Input}],parentContext:[{type:o.Input}]},t}(),K=function(){function t(){}return t.prototype.transform=function(t,e){return e?G(t,e):t},t.decorators=[{type:o.Pipe,args:[{name:"format",pure:!0}]}],t}();function G(t,e){if("string"!=typeof e||null==t)return t;var n=/^\s*(\w+)\s*(:(["'])([^"']*)\3)?$/.exec(e);if(!n[0])return t;switch(n[1].toUpperCase()){case"NUMBER":var r;return r=parseFloat(t),isNaN(r)?t:c.formatNumber(r,"en-US",n[4]);case"DATE":return c.formatDate(t,n[4],"en-US")}return t}var H=function(){function t(t){this._route=t}return t.prototype.ngOnInit=function(){this.widgetDef=this._route.snapshot.data.widgetDef||{type:"empty"},this.parentContext=this._route.snapshot.data.parentContext},t.decorators=[{type:o.Component,args:[{selector:"wdg-widget",template:'<ng-container [wdgWidget]="widgetDef" [parentContext]="parentContext"></ng-container>',encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:e.ActivatedRoute}]},t}(),L=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[{provide:B,useValue:t,multi:!0},{provide:o.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:t,multi:!0}]}},e.decorators=[{type:o.NgModule,args:[{imports:[c.CommonModule],declarations:[$,H,W,K],entryComponents:[W],exports:[$,H,K]}]}],e}(),z=Symbol("FormControl"),U=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.prototype.dynOnSetup=function(t){var e=this;if(!t.bind)throw new Error('Form field widgets must have a "bind" property defined');var n=this._expr.lvalue(t.bind,this.context);if(!n)throw new Error('Form field "bind" property must be an identifier or member expression');if(!s.isReactive(n.o))throw new Error("Bound Key must be of Reactive Type");t.validate&&(this.validate=this._expr.parse(t.validate))?(this.validateContext=E.create(this.context),this.formControl=new l.FormControl(null,null,function(t){return e.validateContext.$value=t.value,e._expr.evaluate(e.validate,e.validateContext,!0).pipe(a.take(1),a.map(function(t){return t?null:{validate:"validation error"}}))})):this.formControl=new l.FormControl;var r=this.context[z];return r&&(r instanceof l.FormGroup?r.addControl(n.m,this.formControl):r instanceof l.FormArray&&r.push(this.formControl)),this.addSubscription=n.o[s.GET_OBSERVABLE](n.m).subscribe(function(t){return t!==e.formControl.value&&e.formControl.setValue(t)}),this.addSubscription=this.formControl.valueChanges.subscribe(function(t){t!==n.o[n.m]&&(n.o[n.m]=t)}),t},t}(A),Y=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{exports:[c.CommonModule,l.ReactiveFormsModule,_.MatAutocompleteModule,g.MatSidenavModule,n.MatButtonModule,u.MatIconModule,d.MatListModule,p.MatInputModule,r.MatDialogModule,m.MatToolbarModule,h.MatProgressBarModule,y.MatExpansionModule,b.MatSelectModule,v.MatTabsModule,x.MatSnackBarModule,w.MatSlideToggleModule,C.MatChipsModule,f.MatCardModule,D.MatCheckboxModule,O.MatSliderModule,S.MatTableModule,M.MatPaginatorModule,P.MatSortModule,I.MatMenuModule]}]}],t}(),J=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.decorators=[{type:o.Component,args:[{selector:"wdg-input",template:'<mat-form-field style.width="100%">\n\n    <mat-label *ngIf="title">\n        {{ title }}\n    </mat-label>\n\n    <input matInput\n           name="aaa"\n           [type]="type || \'text\'"\n           [formControl]="formControl"\n           [placeholder]="placeholder"\n           [required]="required">\n\n    <mat-error [id]="null">\n\n    </mat-error>\n\n    <mat-hint *ngIf="description"\n              [id]="null">\n        {{ description }}\n    </mat-hint>\n\n</mat-form-field>\n',styles:[""],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(U),X=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.decorators=[{type:o.Component,args:[{selector:"wdg-checkbox",template:'<mat-checkbox labelPosition="before" [formControl]="formControl">\n  {{title}}\n</mat-checkbox>\n',styles:[""],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(U),Z=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.decorators=[{type:o.Component,args:[{selector:"wdg-toggle",template:'<mat-slide-toggle labelPosition="before">\n  {{ title}}\n</mat-slide-toggle>\n',styles:[""],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(U),Q=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.decorators=[{type:o.Component,args:[{selector:"wdg-slider",template:'<span>{{title}}</span>\n<mat-slider [formControl]="formControl"></mat-slider>\n',styles:[""],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(U),tt=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.prototype.dynOnSetup=function(t){if(t.bind){var e=this._expr.lvalue(t.bind,this.context);if(!e)throw new Error('Form field "bind" property must be an identifier or member expression');if(!s.isReactive(e.o))throw new Error("Bound Key must be of Reactive Type");this._lvalue=e}return t},t.prototype.clickEvent=function(t){var e=this;this._clickSubs&&(this._clickSubs.unsubscribe(),this._clickSubs=null),this.click&&(this._clickSubs=this._expr.eval(this.click,this.context,!0).pipe(a.take(1)).subscribe(function(t){return e._lvalue.o[e._lvalue.m]=t}))},t.decorators=[{type:o.Component,args:[{selector:"wdg-button",template:'<button mat-button (click)="clickEvent($event)">\n  {{title}}\n</button>\n',styles:[""],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(A),et=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.prototype.dynOnSetup=function(t){this.formGroup=new l.FormGroup({});var e,n=this.context[z];return n&&(n instanceof l.FormGroup?n.addControl("control",this.formGroup):n instanceof l.FormArray&&n.push(this.formGroup)),E.defineHidden(this.context,((e={})[z]=this.formGroup,e)),this.context.$model=s.RxObject({}),t},t.decorators=[{type:o.Component,args:[{selector:"wdg-form",template:'<ng-container *ngFor="let element of content" [wdgWidget]="element" [parentContext]="context">\n\n</ng-container>\n',styles:[""],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(A),nt=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n["enum"]=[],n}return F(t,r),t.prototype.dynOnBeforeBind=function(){this.map("enum",function(t){return Array.isArray(t)?t:[]})},t.prototype.dynOnAfterBind=function(){var e=this;this.map("enum",function(t){return e._filter(e.formControl.value),t})},t.prototype.ngOnInit=function(){var e=this;r.prototype.ngOnInit.call(this),this.filteredOptions=this.formControl.valueChanges.pipe(a.startWith(""),a.map(function(t){return e._filter(t)}))},t.prototype._filter=function(t){var e=t&&t.toLowerCase();return this["enum"].filter(function(t){return t.toLowerCase().includes(e)})},t.decorators=[{type:o.Component,args:[{selector:"wdg-autocomplete",template:'<mat-form-field style.width="100%">\n\n  <mat-label *ngIf="title">\n    {{ title }}\n  </mat-label>\n\n  <input matInput name="aaa" [type]="type || \'text\'" [formControl]="formControl" [placeholder]="placeholder"\n    [matAutocomplete]="auto">\n\n  <mat-error [id]="null">\n\n  </mat-error>\n\n  <mat-hint *ngIf="description" [id]="null">\n    {{ description }}\n  </mat-hint>\n\n  <mat-autocomplete #auto="matAutocomplete">\n    <mat-option *ngFor="let option of filteredOptions | async; index as optIndex" [value]="option">\n      {{option}}\n    </mat-option>\n  </mat-autocomplete>\n\n</mat-form-field>\n',styles:[""],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(U),rt=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{imports:[Y,L.forRoot({widgets:[{type:"input",component:J},{type:"checkbox",component:X},{type:"toggle",component:Z},{type:"slider",component:Q},{type:"button",component:tt},{type:"form",component:et},{type:"autocomplete",component:nt}]})],declarations:[J,X,Z,Q,tt,et,nt],exports:[]}]}],t}(),ot=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.decorators=[{type:o.Component,args:[{selector:"wdg-card",template:'<mat-card>\n  <mat-card-title *ngIf="title">{{title}}</mat-card-title>\n  <mat-card-subtitle *ngIf="description">{{description}}</mat-card-subtitle>\n  <mat-card-content>\n    <ng-container *ngFor="let element of content" [wdgWidget]="element" [parentContext]="context"></ng-container>\n  </mat-card-content>\n  <mat-card-actions align="end" *ngIf="actions">\n    <ng-container *ngFor="let element of actions" [wdgWidget]="element" [parentContext]="context"></ng-container>\n  </mat-card-actions>\n</mat-card>\n',styles:[""],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(A),at=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n.disableSort=[],n.actions=[],n.tableDataSource=new S.MatTableDataSource,n}return F(t,r),t.prototype.dynOnBeforeBind=function(){var r=this,t=this.widgetDef.options;if(t&&!t["dataSource="]&&Array.isArray(t.dataSource)){var e=s.combineMixed(t.dataSource.map(function(t){return s.combineMixed(k(t,r.context,!1,r._expr))},!1),!1);i.isObservable(e)?this.bindings.dataSource=e:this.dataSource=e}this.map("disableSort",function(t){return!0===t?null:Array.isArray(t)?t:[]}),this.map("dataSource",function(t){return r.tableDataSource.data=t.map(function(t){if(t=k(t,E.create(r.context,{$data:t}),!1,r._expr),Array.isArray(r.colTransform))for(var e=0;e<r.colTransform.length;e++)if(r.colTransform[e]){var n=E.create(r.context);n.$data=t[r.colKeys[e]],t[r.colKeys[e]]=r._expr.eval(r.colTransform[e],n,!1)}return t})}),this.map("pageSizes",function(t){return Array.isArray(t)&&t.length?(r.tableDataSource.paginator=r.paginator,t):r.tableDataSource.paginator=null}),this.map("colKeys",function(t){return r.actions&&r.actions.length?r.showCols=t.concat("__actions__"):r.showCols=t,t}),this.map("actions",function(t){return Array.isArray(t)||(t=[]),r.showCols=t.length?r.colKeys.concat("__actions__"):r.colKeys,t})},t.prototype.ngOnInit=function(){r.prototype.ngOnInit.call(this),this.tableDataSource.sort=this.sort},t.prototype.applyFilter=function(t){this.tableDataSource.filter=t,this.tableDataSource.paginator&&this.tableDataSource.paginator.firstPage()},t.prototype.actionClick=function(t,e){var n=E.create(this.context,{$data:t});this.addSubscription=this._expr.eval(this.actions[e].action,n,!0).subscribe(function(){})},t.decorators=[{type:o.Component,args:[{selector:"wdg-table",template:'<div>\n  <section class="table-title">\n    <h6>{{title}}</h6>\n\n    <div class="spacer"></div>\n\n    <mat-form-field *ngIf="filterBy">\n      <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">\n    </mat-form-field>\n  </section>\n\n  <section class="mat-elevation-z1">\n    <table mat-table [dataSource]="tableDataSource" matSort [matSortDisabled]="!disableSort">\n\n      \x3c!-- Dynamic Column definitions--\x3e\n      <ng-container [matColumnDef]="colKey" *ngFor="let colKey of colKeys; index as colIndex">\n        <th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="disableSort?.indexOf(colKey) >= 0"> {{colHeaders[colIndex] || colKey}} </th>\n        <ng-container *ngIf="colFormat && colFormat[colIndex]; else noFormatCellDef">\n          <td mat-cell *matCellDef="let rowData">{{rowData[colKey] | format:colFormat[colIndex]}}</td>\n        </ng-container>\n        <ng-template #noFormatCellDef>\n          <td mat-cell *matCellDef="let rowData">{{rowData[colKey]}}</td>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf="actions?.length" [matColumnDef]="\'__actions__\'">\n        <th mat-header-cell *matHeaderCellDef > {{actionsHeader || \'Actions\'}} </th>\n        <td mat-cell *matCellDef="let rowData">\n          <button mat-icon-button [matMenuTriggerFor]="menu">\n            <mat-icon svgIcon="dots-vertical"></mat-icon>\n          </button>\n          <mat-menu #menu="matMenu">\n\n            <button mat-menu-item *ngFor="let action of actions; index as actionIndex" (click)="actionClick(rowData, actionIndex)">\n              <mat-icon [svgIcon]="actions[actionIndex].icon"></mat-icon>\n              <span>{{actions[actionIndex].label}}</span>\n            </button>\n          </mat-menu>\n        </td>\n      </ng-container>\n\n\n      \x3c!-- Row definitions--\x3e\n      <ng-container *ngIf="colHeaders">\n        <tr mat-header-row *matHeaderRowDef="showCols" class="header-row"></tr>\n      </ng-container>\n      <tr mat-row *matRowDef="let element; columns: showCols;" class="data-row"></tr>\n    </table>\n\n    <mat-paginator [class.hiddenPaginator]="!pageSizes" [pageSizeOptions]="pageSizes" [hidePageSize]="pageSizes?.length<=1"></mat-paginator>\n  </section>\n</div>\n',styles:["dyn-table table{width:100%}dyn-table tr.data-row:hover{background:#f5f5f5}dyn-table tr.data-row:active{background:#efefef}dyn-table .data-row td{border-bottom-width:0}dyn-table mat-paginator.hiddenPaginator{display:none}dyn-table .table-title{display:flex;flex-flow:row}dyn-table .table-title>*{flex:0 0 auto}dyn-table .table-title .spacer{flex:1 1 auto}"],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t.propDecorators={paginator:[{type:o.ViewChild,args:[M.MatPaginator]}],sort:[{type:o.ViewChild,args:[P.MatSort]}]},t}(A),it=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.prototype.dynOnBeforeBind=function(){this.map("direction",function(t){return t||"row"})},t.decorators=[{type:o.Component,args:[{selector:"wdg-container",template:'<ng-container *ngFor="let element of content" [wdgWidget]="element" [parentContext]="context">\n\n</ng-container>\n',styles:["dyn-container.dyn-flex{display:flex;flex-wrap:wrap}dyn-container.dyn-flex>*{flex:1 1 auto}"],host:{"[class.dyn-flex]":"true","[style.flex-direction]":"direction"},encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(A),st=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.prototype.dynOnBeforeBind=function(){this.map("direction",function(t){return t||"row"})},t.decorators=[{type:o.Component,args:[{selector:"wdg-grid-container",template:'<ng-container *ngFor="let element of content" [wdgWidget]="element" [parentContext]="context">\n\n</ng-container>\n',styles:["dyn-grid-container.dyn-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));grid-auto-flow:row dense}"],host:{"[class.dyn-grid]":"true","[style.flex-direction]":"direction"},encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(A),ct=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.prototype.ngOnInit=function(){},t.decorators=[{type:o.Component,args:[{selector:"wdg-tabs",template:'<mat-tab-group>\n\n  <mat-tab *ngFor="let tab of content; index as tabIndex" [label]="tabLabels[tabIndex] || (\'Tab\'+tabIndex)">\n\n    <ng-template matTabContent>\n      <ng-container [wdgWidget]="tab" [parentContext]="context"></ng-container>\n    </ng-template>\n\n  </mat-tab>\n\n\n</mat-tab-group>\n',styles:[""],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(A),lt=function(n){function t(t,e){return n.call(this,t,e)||this}return F(t,n),t.decorators=[{type:o.Component,args:[{selector:"wdg-code",template:"<code>\n{{text}}\n</code>",styles:["dyn-code code{white-space:pre}"],encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:N}]},t}(A),ut=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{imports:[Y,L.forRoot({widgets:[{type:"card",component:ot},{type:"table",component:at},{type:"container",component:it},{type:"grid-container",component:st},{type:"tabs",component:ct},{type:"code",component:lt}]})],declarations:[ot,at,it,st,ct,lt],exports:[]}]}],t}();t.Context=E,t.AbstractWidget=A,t.parseDefObject=k,t.ROOT_CONTEXT=V,t.WidgetDirective=$,t.AF_CONFIG_TOKEN=B,t.WidgetRegistry=T,t.WidgetsCoreModule=L,t.FormatPipe=K,t.formatValue=G,t.RoutedWidgetComponent=H,t.Expressions=N,t.ESpression=j,t.expressionProvider=q,t.FORM_CONTROL=z,t.AbstractFormFieldWidget=U,t.FormFieldWidgetsModule=rt,t.CommonWidgetsModule=ut,t.MaterialModule=Y,t.ɵa=W,t.ɵi=ot,t.ɵn=lt,t.ɵk=it,t.ɵl=st,t.ɵj=at,t.ɵm=ct,t.ɵh=nt,t.ɵf=tt,t.ɵc=X,t.ɵg=et,t.ɵb=J,t.ɵe=Q,t.ɵd=Z,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=reactive-json-form-ng.umd.min.js.map