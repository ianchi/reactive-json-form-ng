<div>
    <section class="table-title">
        <h6>{{ title }}</h6>

        <div class="spacer"></div>

        <mat-form-field *ngIf="filterBy">
            <input matInput
                   (keyup)="applyFilter($event.target.value)"
                   placeholder="Filter">
        </mat-form-field>
    </section>

    <section class="mat-elevation-z1">
        <table mat-table
               [dataSource]="tableDataSource"
               matSort
               [matSortDisabled]="!disableSort">

            <!-- Dynamic Column definitions-->
            <ng-container [matColumnDef]="colKey"
                          *ngFor="let colKey of colKeys; index as colIndex">
                <th mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header
                    [disabled]="disableSort?.indexOf(colKey) >= 0"> {{ colHeaders[colIndex] || colKey }} </th>
                <ng-container *ngIf="colFormat && colFormat[colIndex]; else noFormatCellDef">
                    <td mat-cell
                        *matCellDef="let rowData">{{ rowData[colKey] | format:colFormat[colIndex] }}</td>
                </ng-container>
                <ng-template #noFormatCellDef>
                    <td mat-cell
                        *matCellDef="let rowData">{{ rowData[colKey] }}</td>
                </ng-template>
            </ng-container>

            <ng-container *ngIf="actions?.length"
                          [matColumnDef]="'__actions__'">
                <th mat-header-cell
                    *matHeaderCellDef> {{ actionsHeader || 'Actions' }} </th>
                <td mat-cell
                    *matCellDef="let rowData">
                    <button mat-icon-button
                            [matMenuTriggerFor]="menu">
            <mat-icon svgIcon="dots-vertical"></mat-icon>
          </button>
                    <mat-menu #menu="matMenu">

                        <button mat-menu-item
                                *ngFor="let action of actions; index as actionIndex"
                                (click)="actionClick(rowData, actionIndex)">
              <mat-icon [svgIcon]="actions[actionIndex].icon"></mat-icon>
              <span>{{ actions[actionIndex].label }}</span>
            </button>
                    </mat-menu>
                </td>
            </ng-container>


            <!-- Row definitions-->
            <ng-container *ngIf="colHeaders">
                <tr mat-header-row
                    *matHeaderRowDef="showCols"
                    class="header-row"></tr>
            </ng-container>
            <tr mat-row
                *matRowDef="let element; columns: showCols;"
                class="data-row"></tr>
        </table>

        <mat-paginator [class.hiddenPaginator]="!pageSizes"
                       [pageSizeOptions]="pageSizes"
                       [hidePageSize]="pageSizes?.length<=1"></mat-paginator>
    </section>
</div>
